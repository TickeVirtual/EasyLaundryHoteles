<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket de Compra</title>
    <style>
        * {
            font-family: tahoma, Helvetica, sans-serif;
            font-size: 2.7mm !important;
            line-height: 1 !important;
        }
        .info-tienda {
            margin: 0 0 1mm;
            line-height: 4mm;
        }
        .nro_boleta, .nombre-cliente, .estado-deuda {
            margin: 0;
        }
        .nro_boleta {
            font-size: 4mm !important;
        }
        .nombre-cliente {
            margin: 2mm 0 0;
            font-size: 3mm !important;
        }
        .fecha_recepcion, .fecha_entrega {
            margin: 0;
        }
        .fecha_entrega {
            line-height: 5mm;
        }
        #thermal-pos {
            box-shadow: 0 0 5mm #eee;
            margin: 0 auto;
            max-width: 79mm;
            padding: 3mm;
        }
        #thermal-pos h2 {
            font-size: 2mm;
            line-height: 13px;
        }
        .label {
            margin: 0;
            text-align: center;
            font-size: 2mm;
        }
        .line {
            text-align: center;
            line-height: 0;
            font-size: 1mm;
        }
        .detalles, .item {
            max-width: 35mm;
            word-wrap: break-word;
            vertical-align: text-top;
        }
        .item {
            max-width: 30mm;
            font-size: 2.1mm;
            text-align: start;
        }
        .cantidad {
            text-align: right;
        }
        .footer {
            margin-top: 5mm;
            text-align: center;
            height: 60px;
            page-break-after: auto;
        }
        .table {
            width: 100%;
            text-align: right;
            border-collapse: collapse;
        }
        .table-header {
            text-align: right;
            border-top: groove;
            border-bottom: groove;
        }
        .table-header h2, .table-footer h2 {
            margin: 0;
        }
        .table-item {
            vertical-align: top;
        }
        .top-line {
            border-top: groove;
        }
        .pt-2 {
            padding-top: 2mm;
        }
        .saldo-text {
            margin: 0;
            font-size: 3mm;
            text-align: left;
        }
        .table-footer {
            vertical-align: bottom;
            text-align: right;
            font-size: 2mm;
            line-height: 2mm;
        }
        .info {
            font-size: 1.6mm;
        }
        .info p {
            padding-bottom: 0;
            margin-bottom: 0;
        }
        .align-left {
            text-align: left;
        }
        .m-0 {
            margin: 0 !important;
            text-align: left;
        }
        .policy {
            font-size: 1.5mm;
            line-height: 3.5mm;
            padding: 3mm;
            padding-top: 0;
        }
        .policy .policy-title {
            text-align: center;
            margin: 0;
        }
        .align-right {
            text-align: right;
        }
        .button-container {
            display: flex;
            justify-content: center;
        }
        .button-box {
            max-width: 300px;
            display: flex;
            justify-content: space-between;
        }
        .button-box img {
            max-width: 100%;
        }
        @media print {
            #whatsappButton, #impresoraButton {
                display: none;
            }
        }
    </style>
</head>
<body>
    <script>
        const params = new URLSearchParams(window.location.search);
        const data = {
            nro_boleta: params.get('boleta') || "---",
            nombre_cliente: params.get('cliente') || "==Cliente==",
            telefono: params.get('telefono') || "==Cliente==",
            codigo_pais: params.get('codigo_pais') || "==Cliente==",
            fecha: params.get('fecha') || "dd/mm/aaaa hh:mm:ss",
            fecha_entrega: params.get('fecha_entrega') || "hh:mm:ss",
            total: params.get('total') || "",
            subtotal_desc: params.get('subtotal_desc') || " ",
            total_a_pagar: params.get('total_a_pagar') || " ",
            descuento: params.get('descuento') || " ",
            a_cuenta: params.get('a_cuenta') || " ",
            estado: params.get('estado') || "--",
            cantidades: params.get('cantidades') ? params.get('cantidades').split(",") : [],
            descripciones: params.get('servicios') ? params.get('servicios').split(",") : [],
            detalle: params.get('detalles') ? params.get('detalles').split(",") : [],
            p_units: params.get('p_unit') ? params.get('p_unit').split(",") : []
        };

        const result = data.cantidades.map((_, id) => ({
            cantidad: data.cantidades[id],
            descripcion: data.descripciones[id],
            detalle: data.detalle[id],
            precio_unit: parseFloat(data.p_units[id]).toFixed(2),
            subtotal: (data.cantidades[id] * parseFloat(data.p_units[id])).toFixed(2)
        }));
    </script>
    <div id="header">
        <div class="button-container">
            <div class="button-box">
                <a href="#" id="impresoraButton">
                    <img src="Print.png" width="45%">
                </a>
                <a href="#" id="whatsappButton">
                    <img src="wsp.png" width="45%">
                </a>
            </div>
        </div>
    </div>
    <div id="thermal-pos">
        <div class="label">
            <img src="Easy.png" width="45%">
            <br>
            <p class="info-tienda">
                Av. Luna Pizarro 505, Vallecito, Arequipa,<br>
                Email: facil.laundry@gmail.com<br>
                Horario de lunes a s√°bado de 8:00 am a 5:00 pm<br><br>
            </p>
        </div>
        <div class="label">
            <b>TICKET:</b>
            <h1 class="nro_boleta" id="nro_boleta_id"></h1>
        </div>
        <div class="label">
            <p class="fecha">FECHA DE RECEPCION:<br><b id="fecha"></b></p>
            <b>CLIENTE:</b>
            <h1 class="nombre-cliente" id="mesa"></h1>
        </div>
        <div class="label">
            <p class="fecha_entrega"><b>--:<br><span id="hora"></span></b></p>
        </div>
        <table class="table">
            <thead>
                <tr class="table-header">
                    <th><h2>Cant</h2></th>
                    <th><h2>Descripcion</h2></th>
                    <th><h2>Detalle</h2></th>
                    <th><h2>Precio</h2></th>
                    <th><h2>Subtotal</h2></th>
                </tr>
            </thead>

              
            
            <tbody id="tablaBody"></tbody>
        </table>
        <tr class="table-footer">
              <td colspan="3"><h2>Total a pagar:</h2></td>
              <td colspan="3"><h2 id="total_a_pagar"></h2></td>
          </tr>
        <br><br>
        
        <p class="saldo-text"><b><span class="estado-deuda" id="estado"></span></b></p>
        <br>
        <div class="policy">
            <p class="policy-title">
                <b>Considerar que las siguientes prendas quedan en la planta, para su tratamientv2:</b>
            </p>
        </div>
    </div>
    <script>
        const tablaBody = document.getElementById("tablaBody");
        result.forEach(row => {
            const newRow = document.createElement("tr");
            newRow.className = "table-item";
            newRow.innerHTML = `
                <td class="item" style="text-align: right;">${row.cantidad}</td>
                <td class="item" style="text-align: right;">${row.descripcion}</td>
                <td class="item" style="text-align: right;">${row.detalle}</td>
                <td class="item" style="text-align: right;">${row.precio_unit}</td>
                <td class="item" style="text-align: right;">${row.subtotal}</td>
            `;
            tablaBody.appendChild(newRow);
        });

        document.getElementById("nro_boleta_id").textContent = data.nro_boleta;
        document.getElementById("fecha").textContent = data.fecha;
        document.getElementById("mesa").textContent = data.nombre_cliente;
        document.getElementById("hora").textContent = data.fecha_entrega;
        document.getElementById("estado").textContent = data.estado;
    </script>
</body>
</html>
